# Function Analysis: FUN_000033b4

**Analysis Date**: November 08, 2025
**Tool**: Ghidra 11.2.1 (m68k disassembly)
**Binary**: NDserver (Mach-O m68k executable)

---

## Function Overview

**Address**: `0x000033b4`
**Size**: 608 bytes
**Call Depth**: 1
**Calls Made**: 6 total (2 internal, 2 library, 2 external)
**Called By**: 1 functions

---

## Called By

- `FUN_0000399c` at `0x00003c1a`

---

## Complete Disassembly

```asm
; Address: 0x000033b4
; Size: 608 bytes
; ============================================================================
  0x000033b4:  link.w     A6,-0x10
  0x000033b8:  movem.l    {  A3 A2 D2},SP
  0x000033bc:  pea        (0x1a8).w
  0x000033c0:  move.l     (0xc,A6),-(SP)
  0x000033c4:  move.l     (0x8,A6),-(SP)
  0x000033c8:  bsr.l      0x050021c8
  0x000033ce:  addq.w     0x8,SP
  0x000033d0:  move.l     #0x8054,(SP)
  0x000033d6:  bsr.l      0x050020de
  0x000033dc:  addq.w     0x4,SP
  0x000033de:  tst.l      D0
  0x000033e0:  beq.b      0x000033fa
  0x000033e2:  movea.l    (0xc,A6),A0
  0x000033e6:  moveq      0x1,D2
  0x000033e8:  move.l     D2,(0x1c,A0)
  0x000033ec:  move.l     (0x00007a5c).l,(0x18,A0)
  0x000033f4:  moveq      0x1,D0
  0x000033f6:  bra.w      0x0000360a
  0x000033fa:  moveq      0x1,D2
  0x000033fc:  move.l     D2,(0x0000800c).l
  0x00003402:  movea.l    (0x8,A6),A0
  0x00003406:  move.l     (0x14,A0),D0
  0x0000340a:  cmpi.l     #0x7c3,D0
  0x00003410:  beq.w      0x000034f0
  0x00003414:  bgt.b      0x00003422
  0x00003416:  cmpi.l     #0x7c2,D0
  0x0000341c:  beq.b      0x00003430
  0x0000341e:  bra.w      0x000035de
  0x00003422:  cmpi.l     #0x7c4,D0
  0x00003428:  beq.w      0x000035cc
  0x0000342c:  bra.w      0x000035de
  0x00003430:  movea.l    (0x8,A6),A0
  0x00003434:  moveq      0x20,D2
  0x00003436:  cmp.l      (0x24,A0),D2
  0x0000343a:  bge.b      0x0000344a
  0x0000343c:  movea.l    (0xc,A6),A0
  0x00003440:  moveq      0x4,D2
  0x00003442:  move.l     D2,(0x1c,A0)
  0x00003446:  bra.w      0x000035c4
  0x0000344a:  movea.l    (0xc,A6),A0
  0x0000344e:  clr.l      (0x1c,A0)
  0x00003452:  clr.l      (-0x10,A6)
  0x00003456:  movea.l    (0x8,A6),A0
  0x0000345a:  movea.l    A0,A1
  0x0000345c:  movea.l    (-0x10,A6),A3
  0x00003460:  cmpa.l     (0x24,A0),A3
  0x00003464:  bge.w      0x000035c4
  0x00003468:  lea        (0x8024).l,A2
  0x0000346e:  move.l     (-0x10,A6),D0
  0x00003472:  add.l      D0,D0
  0x00003474:  add.l      (-0x10,A6),D0
  0x00003478:  movea.l    (0x2c,A1,D0*0x4),A0
  0x0000347c:  suba.l     A1,A1
  0x0000347e:  lea        (0x0,A1,A1*0x2),A3
  0x00003482:  move.l     A3,D0
  0x00003484:  asl.l      #0x2,D0
  0x00003486:  move.l     A0,D1
  0x00003488:  sub.l      (0x4,A2,D0*0x1),D1
  0x0000348c:  cmp.l      (0x8,A2,D0*0x1),D1
  0x00003490:  bcs.b      0x000034a8
  0x00003492:  addq.w     0x1,A1
  0x00003494:  moveq      0x3,D2
  0x00003496:  cmp.l      A1,D2
  0x00003498:  bge.b      0x0000347e
  0x0000349a:  clr.l      (-0xc,A6)
  0x0000349e:  tst.l      (-0xc,A6)
  0x000034a2:  bne.b      0x000034b2
  0x000034a4:  bra.w      0x00003572
  0x000034a8:  add.l      (0x0,A2,D0*0x1),D1
  0x000034ac:  move.l     D1,(-0xc,A6)
  0x000034b0:  bra.b      0x0000349e
  0x000034b2:  move.l     (-0x10,A6),D0
  0x000034b6:  add.l      D0,D0
  0x000034b8:  add.l      (-0x10,A6),D0
  0x000034bc:  asl.l      #0x2,D0
  0x000034be:  movea.l    (0x8,A6),A0
  0x000034c2:  move.l     (0x30,A0,D0*0x1),-(SP)
  0x000034c6:  move.l     (-0xc,A6),-(SP)
  0x000034ca:  move.l     (0x28,A0,D0*0x1),-(SP)
  0x000034ce:  movea.l    (0x00008020).l,A0
  0x000034d4:  jsr        A0
  0x000034d6:  addq.w     0x8,SP
  0x000034d8:  addq.w     0x4,SP
  0x000034da:  addq.l     0x1,(-0x10,A6)
  0x000034de:  movea.l    (0x8,A6),A1
  0x000034e2:  movea.l    (-0x10,A6),A3
  0x000034e6:  cmpa.l     (0x24,A1),A3
  0x000034ea:  blt.b      0x0000346e
  0x000034ec:  bra.w      0x000035c4
  0x000034f0:  movea.l    (0x8,A6),A0
  0x000034f4:  moveq      0x20,D2
  0x000034f6:  cmp.l      (0x24,A0),D2
  0x000034fa:  blt.w      0x0000343c
  0x000034fe:  movea.l    (0xc,A6),A0
  0x00003502:  clr.l      (0x1c,A0)
  0x00003506:  clr.l      (-0x10,A6)
  0x0000350a:  movea.l    (0x8,A6),A0
  0x0000350e:  movea.l    A0,A1
  0x00003510:  movea.l    (-0x10,A6),A3
  0x00003514:  cmpa.l     (0x24,A0),A3
  0x00003518:  bge.w      0x000035c4
  0x0000351c:  lea        (0x8024).l,A2
  0x00003522:  move.l     (-0x10,A6),D0
  0x00003526:  add.l      D0,D0
  0x00003528:  add.l      (-0x10,A6),D0
  0x0000352c:  move.l     (0x28,A1,D0*0x4),-(SP)
  0x00003530:  bsr.l      0x000030c2                     ; -> FUN_000030c2
  0x00003536:  move.l     (-0x10,A6),D0
  0x0000353a:  add.l      D0,D0
  0x0000353c:  add.l      (-0x10,A6),D0
  0x00003540:  movea.l    (0x8,A6),A0
  0x00003544:  movea.l    (0x2c,A0,D0*0x4),A1
  0x00003548:  addq.w     0x4,SP
  0x0000354a:  suba.l     A0,A0
  0x0000354c:  lea        (0x0,A0,A0*0x2),A3
  0x00003550:  move.l     A3,D0
  0x00003552:  asl.l      #0x2,D0
  0x00003554:  move.l     A1,D1
  0x00003556:  sub.l      (0x4,A2,D0*0x1),D1
  0x0000355a:  cmp.l      (0x8,A2,D0*0x1),D1
  0x0000355e:  bcs.b      0x0000357e
  0x00003560:  addq.w     0x1,A0
  0x00003562:  moveq      0x3,D2
  0x00003564:  cmp.l      A0,D2
  0x00003566:  bge.b      0x0000354c
  0x00003568:  clr.l      (-0x8,A6)
  0x0000356c:  tst.l      (-0x8,A6)
  0x00003570:  bne.b      0x00003588
  0x00003572:  movea.l    (0xc,A6),A0
  0x00003576:  moveq      0x1,D2
  0x00003578:  move.l     D2,(0x1c,A0)
  0x0000357c:  bra.b      0x000035c4
  0x0000357e:  add.l      (0x0,A2,D0*0x1),D1
  0x00003582:  move.l     D1,(-0x8,A6)
  0x00003586:  bra.b      0x0000356c
  0x00003588:  move.l     (-0x10,A6),D0
  0x0000358c:  add.l      D0,D0
  0x0000358e:  add.l      (-0x10,A6),D0
  0x00003592:  asl.l      #0x2,D0
  0x00003594:  movea.l    (0x8,A6),A0
  0x00003598:  move.l     (0x30,A0,D0*0x1),-(SP)
  0x0000359c:  move.l     (0x28,A0,D0*0x1),-(SP)
  0x000035a0:  move.l     (-0x8,A6),-(SP)
  0x000035a4:  movea.l    (0x00008020).l,A0
  0x000035aa:  jsr        A0
  0x000035ac:  addq.w     0x8,SP
  0x000035ae:  addq.w     0x4,SP
  0x000035b0:  addq.l     0x1,(-0x10,A6)
  0x000035b4:  movea.l    (0x8,A6),A1
  0x000035b8:  movea.l    (-0x10,A6),A3
  0x000035bc:  cmpa.l     (0x24,A1),A3
  0x000035c0:  blt.w      0x00003522
  0x000035c4:  moveq      0x1,D2
  0x000035c6:  move.l     D2,(-0x4,A6)
  0x000035ca:  bra.b      0x000035f4
  0x000035cc:  movea.l    (0xc,A6),A0
  0x000035d0:  move.l     #-0x131,(0x1c,A0)
  0x000035d8:  clr.l      (-0x4,A6)
  0x000035dc:  bra.b      0x000035f4
  0x000035de:  clr.l      (0x0000800c).l
  0x000035e4:  move.l     (0xc,A6),-(SP)
  0x000035e8:  move.l     (0x8,A6),-(SP)
  0x000035ec:  bsr.l      0x000061f4                     ; -> FUN_000061f4
  0x000035f2:  bra.b      0x0000360a
  0x000035f4:  clr.l      (0x0000800c).l
  0x000035fa:  movea.l    (0xc,A6),A0
  0x000035fe:  move.l     (0x00007a5c).l,(0x18,A0)
  0x00003606:  move.l     (-0x4,A6),D0
  0x0000360a:  movem.l    -0x1c,A6,{  D2 A2 A3}
  0x00003610:  unlk       A6
  0x00003612:  rts
; ============================================================================
```

---

## Hardware Access Analysis

### Hardware Registers Accessed

**None** - This function does not directly access any hardware registers.

**Rationale**:
- No memory-mapped I/O addresses in range `0x02000000-0x02FFFFFF` (NeXT hardware registers)
- No NeXTdimension MMIO in range `0xF8000000-0xFFFFFFFF` (ND RAM/VRAM/registers)
- Pure software function operating on RAM-based data structures


---

## Calls Made

### Internal Function Calls

- `FUN_000030c2` at `0x000030c2` (called from `0x00003530`)
- `FUN_000061f4` at `0x000061f4` (called from `0x000035ec`)

### Library/System Calls

- `0x050021c8` (called from `0x000033c8`)
- `0x050020de` (called from `0x000033d6`)

### External Calls

- `0x000000a0` (called from `0x000034d4`)
- `0x000000a0` (called from `0x000035aa`)

---

## Library/System Functions

### Library Functions Called

- `UNKNOWN` at `0x050021c8` (used 1x across codebase)
- `UNKNOWN` at `0x050020de` (used 1x across codebase)

---

## Function Classification

**Type**: Internal Function
**Complexity**: Calls 6 functions
**Hardware Interaction**: No

---

## Notes

- This documentation was automatically generated from disassembly analysis
- Function purpose and detailed behavior require manual reverse engineering
- See `FUNCTION_ANALYSIS_EXAMPLE.md` for an example of deep manual analysis

---

## Related Functions

### Calls

### Internal Function Calls

- `FUN_000030c2` at `0x000030c2` (called from `0x00003530`)
- `FUN_000061f4` at `0x000061f4` (called from `0x000035ec`)

### Library/System Calls

- `0x050021c8` (called from `0x000033c8`)
- `0x050020de` (called from `0x000033d6`)

### External Calls

- `0x000000a0` (called from `0x000034d4`)
- `0x000000a0` (called from `0x000035aa`)

### Called By

- `FUN_0000399c` at `0x00003c1a`

---

*Generated by generate_all_function_docs.py*
